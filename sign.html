<!DOCTYPE html>
<html>
<head>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
</head>
<body>
    <button id="google-signin">Sign in with Google</button>
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyAwXiIyWpTG2kTse4JARHQ2aKTsTWut1No",
            authDomain: "mongotest-1e344.firebaseapp.com",
            projectId: "mongotest-1e344",
            storageBucket: "mongotest-1e344.appspot.com",
            messagingSenderId: "778515725880",
            appId: "1:778515725880:web:695ab9188414e9f07d70cd",
            measurementId: "G-VJE271HSYR"
        };
        firebase.initializeApp(firebaseConfig);

        var provider = new firebase.auth.GoogleAuthProvider();

        document.getElementById('google-signin').addEventListener('click', function() {
            firebase.auth().signInWithPopup(provider).then(function(result) {
                var user = result.user;
                user.getIdToken().then(function(idToken) {
                    // Send the ID token to the server
                    fetch('/verify_id_token', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({idToken: idToken}),
                    }).then(function(response) {
                        return response.text();
                    }).then(function(text) {
                        console.log(text);
                    }).catch(function(error) {
                        console.error('Error:', error);
                    });
                });
            }).catch(function(error) {
                // Handle errors here
            });
        });
    </script>
</body>
</html>